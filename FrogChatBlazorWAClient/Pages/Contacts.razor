@page "/contacts"
@using ViewModel;
@inject IContactsViewModel contactViewModel
@inject NavigationManager navigationManager
@inject ILocalStorageService localStorage;

<PageTitle>Contact</PageTitle>

<div class="col-12">
    @if (contactViewModel.Contacts != null && contactViewModel.Contacts.Count() > 0)
    {
        @foreach (var contact in contactViewModel.Contacts)
        {
            <a href="/chat/@contact.Name" class="list-group-item list-group-item-action flex-column align-items-start">@contact.Name</a>
        }

    }
    <button @onclick="GoogleLogin">googleAUth </button>
@*<AuthorizeView>
    <Authorized>
        Welcome to your new app.
        @foreach(var item in context.User.Claims)
        {
            <h2>@item.Type = @item.Value</h2>
        }
        <img src="@context.User.Claims.Where(s=> s.Type == "picture").FirstOrDefault().Value"/>
    </Authorized>
    <NotAuthorized>
        <a href="auth/google-login" class="btn btn-secondary"> Login</a>
    </NotAuthorized>
</AuthorizeView>*@
</div>

@code{
    protected override async Task OnInitializedAsync() => await contactViewModel.GetContacts();

    private async void GoogleLogin()
    {
        navigationManager.NavigateTo("https://localhost:44305/api/user/google-login?returnURL=https://localhost:7206/GoogleAuth", true);
    }
}
